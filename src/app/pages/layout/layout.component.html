<ng-container class="bg-gray-700">
  <!-- Mobile Nav (visible on mobile only) -->
  <nav [ngClass]="{'sticky-nav': isSticky}" class="flex lg:hidden justify-between items-center my-4 px-4 py-2 sticky top-0 left-0 w-full bg-white z-50 shadow-sm">
    <!-- Logo (Mobile) -->
    <a href="#hero" class="flex items-center gap-2">
      <img class="object-cover h-8 w-8" src="/assets/slack.svg" alt="Logo">
      <span class="text-[1rem] font-bold">User Management</span>
    </a>

    <!-- Hamburger Icon -->
    <div class="flex items-center">
      <button (click)="MobileMenu()" [ngClass]="{ 'rotate-360': isMenuOpen }" class="text-2xl transition-transform duration-500 ease-in-out animate-rotate">
        &#9776;
      </button>
    </div>

    <!-- Mobile Menu -->
     @if(isMenuOpen)
     {
      <div class="fixed inset-0 bg-gray-900 text-white shadow-lg z-50"
      [ngClass]="{
        'animate-slideInFromRight': isAnimatingIn,
        'animate-slideInToRight': !isAnimatingIn
      }">
        <div class="flex flex-col h-full">
          <!-- Header Section with Logo and Close Button -->
          <div class="flex justify-between items-center p-4 border-b border-gray-200">
            <!-- Logo (Mobile) -->
            <a href="#hero" class="flex items-center gap-2">
              <img class="object-cover h-8 w-8" src="/assets/slack.svg" alt="Logo">
              <span class="text-[1rem] font-bold">User Management</span>
            </a>
        
            <!-- Close Menu Icon -->
            <button (click)="closeMenu()" class="text-2xl">
              <i class="fa-solid fa-circle-xmark"></i>
            </button>
          </div>
        
          <!-- Navigation Links (Mobile) -->
          <div class="flex flex-col p-6 space-y-6 font-bold text-lg">
            <ng-container *ngFor="let link of navLinks; let i = index">
              <!-- Parent Links without children -->
              @if(!link.children) {
                <a 
                  [routerLink]="[link.path]" 
                  (click)="onLinkClick(link)"
                  routerLinkActive="bg-blue-600 text-white" 
                  class="flex items-center py-2 px-4 rounded hover:bg-gray-700 transition-colors duration-300 ease-in-out"
                >
                  <i class="fa-solid" [ngClass]="link.icon"></i>
                  <span class="ml-3">{{ link.title }}</span>
                </a>
              }
          
              <!-- Parent with Child Links -->
              @if(link.children) {
                <div>
                  <a  (click)="toggleDropdown(i)" 
                    class="flex items-center py-2 px-4 rounded hover:bg-gray-700 transition-colors duration-300 ease-in-out cursor-pointer">

                    <span class="ml-3">{{ link.title }}</span>
                    <i class="ml-auto fa-solid" [ngClass]="openIndex === i ? 'fa-chevron-up' : 'fa-chevron-down'" aria-hidden="true"></i>
                  </a>
                  <!-- Child Links -->
                  @if(openIndex === i) {
                    <div class="ml-6 mt-2 space-y-2 transition-all duration-300 ease-in-out">
                      <a *ngFor="let child of link.children" 
                        [routerLink]="[child.path]" 
                        (click)="onLinkClick(link)"
                        routerLinkActive="bg-gray-600 text-white" 
                        class="block py-1 px-3 rounded hover:bg-gray-500 transition-colors duration-300 ease-in-out"
                      >
                        <i class="fa-solid" [ngClass]="link.icon"></i>
                        <span class="ml-3">{{ child.title }}</span>
                      </a>
                    </div>
                  }
                </div>
              }
            </ng-container>
          </div>
          
        </div>
        
      </div>
     }

  </nav>

  <!-- Desktop Nav (visible on desktop only) -->
 <div class="flex-wrap fixed hidden lg:flex flex-col h-screen w-[20%] bg-gray-900 text-white  left-0 top-0">

        <!-- Logo -->
        <div class="flex items-center justify-start py-4 px-4 border-b border-gray-700">
          <img src="/assets/slack.svg" alt="Logo" class="h-8 w-8 object-cover mr-2" />
          <span class="text-2xl font-bold" style="font-size: 1.5rem">User Management</span>
        </div>

<!-- Navigation Links Desktop -->
    <div class="mt-10 flex flex-col space-y-4 px-4">
      <ng-container *ngFor="let link of navLinks; let i = index">
        <!-- Parent Links without children -->
        @if(!link.children)
        {
          <a 
          [routerLink]="[link.path]" 
          (click)="link.action === 'logout' ? onLogout() : null"
          routerLinkActive="bg-blue-600 text-white" 
          class="flex items-center py-2 px-4 rounded hover:bg-gray-700 transition-colors duration-300 ease-in-out"
          >
          <i class="fa-solid" [ngClass]="link.icon"></i>
          <span class="ml-3">{{ link.title }}</span>
          </a>
        }

        <!-- Parent with Child Links -->
        @if(link.children)
        {
            <div>
              <a (click)="toggleDropdown(i)" [class.] class="flex items-center py-2 px-4 rounded  hover:bg-gray-700 transition-colors duration-300 ease-in-out cursor-pointer">
                <span class="ml-3">{{ link.title }}</span>
                <i class="ml-auto fa-solid" [ngClass]="openIndex === i ? 'fa-chevron-up' : 'fa-chevron-down'" aria-hidden="true"></i> <!-- Toggle Icon -->
              </a>
              <!-- Child Links -->
              <div *ngIf="openIndex === i" class="ml-6 mt-2 space-y-2 transition-all duration-300 ease-in-out">
                <a *ngFor="let child of link.children" 
                  [routerLink]="[child.path]" 
                  routerLinkActive="bg-gray-600 text-white" 
                  class="block py-1 px-3 rounded hover:bg-gray-500 transition-colors duration-300 ease-in-out">
                  {{ child.title }}
                </a>
              </div>
            </div>
        }


        
      </ng-container>
    </div>


        
</div>

<!-- Main Content Area (80% width) -->
<div class="flex-wrap lg:w-4/5 w-full ml-auto bg-[#F6F6F6]">
  <!-- Header with Logo and Title (Top fixed section) -->
  <div class=" top-0 z-50 flex  items-center justify-between px-6 py-4 bg-white shadow-md max-h-auto">
    <!-- Left Aligned Section -->
    <div class="flex  items-center space-x-4">
      <h3 class="font-bold font-gilroy  text-lg">Here is your <span class="pl-1 text-blue-400">{{ titlesrv.titleSubject() }}</span> </h3>
    </div>
    

    <!-- Right Aligned Section -->
    <div class="relative">
      <!-- Button containing username, role, avatar, and chevron -->
      <button (click)="toggleMenu()" 
              class="flex items-center bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-lg shadow-md transition-all duration-300 space-x-3 focus:outline-none">
        
        <!-- User details (name and role) -->
        <div class="text-left">
          <span class="block font-semibold text-sm font-gilroy text-gray-700">{{ loggedInUserName }}</span>
          <p class="text-xs italic text-gray-500">Admin</p>
        </div>
    
        <!-- Avatar and Chevron -->
        <div class="flex items-center">
          <img class="w-10 h-10 object-cover rounded-full" src="/assets/avatar.jpg" alt="User Avatar">
          <i [ngClass]="menuOpen ? 'fa-chevron-up' : 'fa-chevron-down'" 
             class="fas text-gray-500 ml-2 transition-transform duration-300"></i>
        </div>
      </button>
    
      <!-- Dropdown menu -->
      <div *ngIf="menuOpen" 
           class="absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-md shadow-lg animate-fade-in z-10">
        <button (click)="onLogout()" 
                class="w-full px-4 py-2 text-left text-gray-700 hover:bg-gray-100 hover:text-gray-900 transition-colors duration-300">
          Logout
        </button>
      </div>
    </div>
    


  </div>
  

  <!-- Router Outlet (Main Content) -->
  <div class="p-2 sm:p-6">
    <router-outlet></router-outlet>
  </div>
</div>

</ng-container>

<!-- Alerts Component -->
<app-alerts></app-alerts>
